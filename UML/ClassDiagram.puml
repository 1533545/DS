@startuml

skinparam linetype ortho

/' Back End '/
package "kernel" #DDDDDD {

  Abstract Component {
      #fatherNode : Component
      #tags : List<String>
      #name : String
      #description: String
      #startTime: LocalDateTime
      #finishTime: LocalDateTime
      #toJson() : JSONObject
      #print(indentation : int) : void
      -generateTagsFromJson((jsonArray :JSONArray) : List<String>
      #toJsonComponent(jsonObject: JSONObject) : JSONObject
      -tagsTojson() : JSONArray
      #updateStartTime(time : LocalDateTime) : void
      #updateFinishTime(time : LocalDateTime) : void
      +acceptVisitor(visitor : Visitor) : void
  }

  class Project {
     -logger: Logger
     -children: list<Component>
     +addComponent(Component : ProjectComponent) : void
     +toJson(): JSONObject
     +RemoveComponent(id : String) : boolean
     -generateChildrenFromJson(jsonArray :JSONArray) : void
     -generateTaskFromJson(childJson : JSONObject) : void
     -generateProjectFromJson(childJson : JSONObject) : void
     -childrenToJson() : JSONArray
  }

  class Task {
    -logger: Logger
    -intervals: list<Interval>
    -runningInterval : Interval
    +addInterval(interval : Interval) : void
    +startTask() : void
    +finishTask() : void
    -intervalsToJson(): JSONArray
    -loadIntervalsFromJson(jsonArray :JSONArray) : void
    -startObservingClock() : void
    -stopObservingClock() : void
  }

  class Interval {
    -logger : Logger
    -start : LocalDateTime
    -end : LocalDateTime
    -fatherTask : Task
    +toJson():JSONObject
    +update(obs : Observable, arg : Object)
  }

  class Clock{
  -_logger: Logger
  -timer: Timer
  -clock: Clock
  -cancelTimer: boolean
  +startClock() : void
  +stopClock() : void
  -tick() : void
  -stopTimer() : void
  }

  class JsonReader {
    + {static} readJson(fileName : String) : JSONObject
    - {static} readJsonFile(fileName : String) : String
    - {static} readFile(file : File) : String
  }

  class JsonWriter {
    + {static} saveJson(json:JSONObject) : void
    + {static} saveJsonPrettier(json:JSONObject) : void
    - writeJson(text : String, fileName : String)
  }

  interface Visitor{
    visitProject(project:Project) : void
    visitTask(task: Task) :void
  }

  class TagExplorer{
    -targetTag: String
    -resultTag: List<Component>
    +cleanTargetTag(): void
    +getResult(): List<Component>
    +search((project:Project): List<Component>
  }

  class Printer{
    -indentation : int
    -generateCustomIndentation(): String
    -generateCustomTagListString(tagList: List<String>)
    +print(component: Component): void
  }

  class NameExplorer{
    -targetName: String
    -resultName: Component
    +getResult(): Component
    +search(project: Project): void
  }

  package "java.util"
  {
      abstract Observable {
        +AddObserver(o:Observer) : void
        +DeleteObserver(o:Observer) : void
        +DeleteObservers() : void
        +HasChanged() : bool
        #ClearChanged() : void
        +NotifyObservers(arg:object) : void
      }
      interface Observer
      {
           +void Update(observable : Observable, arg: object )
      }
      Observable "0..N" *--> "1" Observer:ObserverList
  }

}

/' Relationship '/
  NameExplorer -up-|> Visitor
  Printer -left-|> Visitor
  TagExplorer -up-|> Visitor
  Task -right-|> Component
  Visitor -down-> Component
  Component <|-- Project
  Component "N" --o "1" Project : Children
  Task "1" o-- "0..N" Interval
  Interval ..|> Observer
  Clock --|> Observable

@enduml
